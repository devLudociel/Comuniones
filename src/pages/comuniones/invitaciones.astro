---
import { fileURLToPath } from "node:url";
import ProductTemplate from "../../components/ProductTemplate.astro";
import { productos } from "../../data/productos.js";
import { buildGalleryFromFolders, listProductFolders } from "../../utils/gallery.js";

const product = productos.find((item) => item.slug === "invitaciones");
const productosDir = fileURLToPath(
  new URL("../../../public/images/productos", import.meta.url)
);

const invitationDirs = listProductFolders(productosDir, "invitacion");
const gallery = buildGalleryFromFolders(productosDir, invitationDirs);

const productWithGallery = product
  ? { ...product, gallery }
  : { gallery };
---

<ProductTemplate product={productWithGallery} />
